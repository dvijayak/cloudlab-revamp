 <!DOCTYPE html
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="viewport" id="viewport" content="height=device-height,width=device-width,user-scalable=no" />
		<title>Cloud Lab: Log-in</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
		<script src="js/util.js"></script>
		<script>
			$(function () {								
				// Always clear the session on loading this page
				Util.logout();				
			});
		</script>
	</head>
	
	<body>				
		
		<div id="header" style="text-align: center; font-size: 40px;">Welcome To CloudLab</div>
		
		<div id="centerContainer">
			<script type="text/javascript" src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/md5.js"></script>
			<script>
				$(function () {
					$( "#loginButton" ).click(function () {						
						var url = Util.urls.php.main,
							data = "username=" + $( "#userText" ).val() + "&password=" + CryptoJS.MD5($( "#passText" ).val()),
							success = function (output) {								
								if (output.status == "OK") {
									var cookies = Util.cookiesToArray();
									if (cookies['role'] == "3") {
										window.location.href="admin.html";
									}
									else if (cookies['role'] == "2" || cookies['role'] == "1") {
										window.location.href="courses.html";
									}
								}
								// Incorrect login credentials
								else if (output.status == "INTRUDER") {									
									alert("Back off, intruder!");
									//window.location.href = "index.html";
								}
							},
							dataType = "json";						
						$.post(url, data, success, dataType);
					});
				});
			</script>
			<form>
				<fieldset>
					<ul>
						<li>
							<label for="userText" style="font-size: 20px;">Username: </label>
							<input id="userText" type="text" value="mdelong"></input>
						</li>
						
						<li>
							<label for="passText" style="font-size: 20px;">Password: </label>
							<input id="passText" type="password" value="M"></input>															
						</li>
						
						<li>
							<input id="loginButton" type="button" value="Log-In"></input>
						</li>												
					</ul>
				</fieldset>
			</form> 		
		</div>
		
		<div id="aboutContainer">
			<h3>About</h3>
			<p>Work on (insert school name)'s CS labs on the cloud!</p>
		</div>
	</body>
	
</html>

